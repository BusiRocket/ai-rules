---
description: Post creating and refactoring checks (agent-optimized)
globs: "*.ts,*.tsx"
alwaysApply: true
---

# Post Creating and Refactoring Checks

## Golden Path

Run this after every meaningful change:

- The project's check script (e.g. `yarn check:all`, `npm run check`).

## If something fails

- Type errors: fix types first (do not format/lint until types are clean).
- Lint errors: prefer refactoring into smaller files instead of adding ignores.
- Formatting churn: keep diffs small; avoid unrelated reformatting.

## Frontend / Vite

- In frontend bundles, **never reference Node globals** (e.g. `process`) at runtime; they can ship to the bundle and cause "process is not defined" in browsers or mobile webviews. Prefer `import.meta.env` (Vite) or equivalent for env vars.

## When to Split (fast heuristics)

Split the file immediately if any is true:

- More than one exported symbol.
- More than one responsibility (UI + state + helpers).
- Any helper function exists inside a component/hook.
- Inline `type`/`interface` exists outside `types/`.
- File > ~80 lines and still growing.
